## 问题根因
- Supabase 被默认配置为“已启用”，但用户未登录 Supabase；
- “查看报告”弹窗判断依据是是否存在 Supabase 客户端，而不是是否登录，导致未登录仍走云端查询；
- 结果：列表保存走本地演示(localStorage)，而弹窗报告页走云端查询 → 找不到内容/提示“请先登录”。

## 改动目标
- 未登录云端时，查看报告使用本地演示数据；
- 列表加载逻辑在未登录时也读取本地演示数据；
- 保存、查看、列表三处逻辑统一：登录→云端；未登录→本地。

## 具体改动
1) 查看报告行为
- 修改 `viewSavedReport/openReportModal`：当 `Auth.getCurrentUser()` 返回空时，强制在 iframe URL 追加 `local=1`，例如 `report.html?report_id=...&local=1`。
- 这样报告页 `report.js` 会直接走本地演示读取 `demo_reports_<user.id>`。

2) 我的报告列表加载
- 修改 `loadMyReports` 分支选择逻辑：
  - 仅当“有 Supabase 客户端并且已登录用户”时走云端分支；
  - 否则走本地演示分支，确保未登录也能看到本地保存的报告。

3) 保存报告
- 保持现有逻辑：已登录云端则 `insert` 到 `reports` 表；未登录则保存到 `localStorage`。
- 确保字段 `content` 或 `markdown_output` 始终写入（已实现），报告页用两者之一渲染。

4) 报告页会话等待
- 已加入 `auth.getSession()` + `auth-changed` 一次性重试；保留该逻辑以支持云端登录后刷新内容。

## 验证
- 未登录状态：生成并保存后，列表展示本地记录；点击“查看报告”弹窗正确显示内容。
- 登录状态：同样流程，数据来自云端 `reports` 表；弹窗显示实际内容。

## 影响范围
- 仅前端脚本逻辑；不改后端与数据结构。

## 后续可选
- 在导航处显式标注当前数据来源（云端/本地），避免误解；
- 为“保存到我的报告”在未登录时提示“当前将保存到本地”以提升可见性。